{"ast":null,"code":"import todoService from '../services/todos';\n\nconst todoReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case 'GET_TODOS':\n      return action.data;\n\n    case 'CREATE_TODO':\n      return state.concat(action.data);\n\n    case 'DELETE_TODO':\n      return state.filter(todo => todo.id !== action.data);\n\n    case 'UPDATE_TODO':\n      console.log({\n        action\n      });\n      const id = action.data.id;\n      const todoToUpdate = state.find(todo => todo.id === id);\n\n      if (action.data.status === 'not-done') {\n        const updatedTodo = { ...todoToUpdate,\n          status: 'done'\n        };\n        return state.map(todo => todo.id !== id ? todo : updatedTodo);\n      } else {\n        const updatedTodo = { ...todoToUpdate,\n          status: 'not-done'\n        };\n        return state.map(todo => todo.id !== id ? todo : updatedTodo);\n      }\n\n    default:\n      return state;\n  }\n};\n\nexport const getAllTodos = () => {\n  return async dispatch => {\n    const todos = await todoService.getAllTodos();\n    dispatch({\n      type: 'GET_TODOS',\n      data: todos\n    });\n  };\n};\nexport const createTodo = todo => {\n  return async dispatch => {\n    const newTodo = await todoService.createTodo(todo);\n    dispatch({\n      type: 'CREATE_TODO',\n      data: newTodo\n    });\n  };\n};\nexport const deleteTodo = todo => {\n  return async dispatch => {\n    dispatch({\n      type: 'DELETE_TODO',\n      data: todo.id\n    });\n    await todoService.removeTodo(todo.id);\n  };\n};\nexport const updateTodo = todo => {\n  return async dispatch => {\n    await todoService.updateTodo(todo);\n    console.log({\n      updatedTodo\n    });\n    dispatch({\n      type: 'UPDATE_TODO',\n      data: todo\n    });\n  };\n};\nexport default todoReducer;","map":{"version":3,"names":["todoService","todoReducer","state","action","type","data","concat","filter","todo","id","console","log","todoToUpdate","find","status","updatedTodo","map","getAllTodos","dispatch","todos","createTodo","newTodo","deleteTodo","removeTodo","updateTodo"],"sources":["/Users/sirpacoder/projects/DevOps-Kubernetes/Exercises-part-2/exercise-2.08/project/client/src/reducers/todoReducer.js"],"sourcesContent":["import todoService from '../services/todos'\n\nconst todoReducer = (state = [], action) => {\n  switch (action.type) {\n    case 'GET_TODOS':\n      return action.data\n    case 'CREATE_TODO':\n      return state.concat(action.data)\n    case 'DELETE_TODO':\n      return state.filter(todo => todo.id !== action.data)\n    case 'UPDATE_TODO':\n      console.log({ action })\n      const id = action.data.id\n      const todoToUpdate = state.find(todo => todo.id === id)\n      if (action.data.status === 'not-done') {\n        const updatedTodo = { ...todoToUpdate, status: 'done' }\n        return state.map(todo => (todo.id !== id ? todo : updatedTodo))\n      } else {\n        const updatedTodo = { ...todoToUpdate, status: 'not-done' }\n        return state.map(todo => (todo.id !== id ? todo : updatedTodo))\n      }\n    default:\n      return state\n  }\n}\n\nexport const getAllTodos = () => {\n  return async dispatch => {\n    const todos = await todoService.getAllTodos()\n    dispatch({\n      type: 'GET_TODOS',\n      data: todos,\n    })\n  }\n}\n\nexport const createTodo = todo => {\n  return async dispatch => {\n    const newTodo = await todoService.createTodo(todo)\n    dispatch({\n      type: 'CREATE_TODO',\n      data: newTodo,\n    })\n  }\n}\n\nexport const deleteTodo = todo => {\n  return async dispatch => {\n    dispatch({\n      type: 'DELETE_TODO',\n      data: todo.id,\n    })\n    await todoService.removeTodo(todo.id)\n  }\n}\n\nexport const updateTodo = todo => {\n  return async dispatch => {\n    await todoService.updateTodo(todo)\n    console.log({ updatedTodo })\n    dispatch({\n      type: 'UPDATE_TODO',\n      data: todo,\n    })\n  }\n}\n\nexport default todoReducer\n"],"mappings":"AAAA,OAAOA,WAAP,MAAwB,mBAAxB;;AAEA,MAAMC,WAAW,GAAG,YAAwB;EAAA,IAAvBC,KAAuB,uEAAf,EAAe;EAAA,IAAXC,MAAW;;EAC1C,QAAQA,MAAM,CAACC,IAAf;IACE,KAAK,WAAL;MACE,OAAOD,MAAM,CAACE,IAAd;;IACF,KAAK,aAAL;MACE,OAAOH,KAAK,CAACI,MAAN,CAAaH,MAAM,CAACE,IAApB,CAAP;;IACF,KAAK,aAAL;MACE,OAAOH,KAAK,CAACK,MAAN,CAAaC,IAAI,IAAIA,IAAI,CAACC,EAAL,KAAYN,MAAM,CAACE,IAAxC,CAAP;;IACF,KAAK,aAAL;MACEK,OAAO,CAACC,GAAR,CAAY;QAAER;MAAF,CAAZ;MACA,MAAMM,EAAE,GAAGN,MAAM,CAACE,IAAP,CAAYI,EAAvB;MACA,MAAMG,YAAY,GAAGV,KAAK,CAACW,IAAN,CAAWL,IAAI,IAAIA,IAAI,CAACC,EAAL,KAAYA,EAA/B,CAArB;;MACA,IAAIN,MAAM,CAACE,IAAP,CAAYS,MAAZ,KAAuB,UAA3B,EAAuC;QACrC,MAAMC,WAAW,GAAG,EAAE,GAAGH,YAAL;UAAmBE,MAAM,EAAE;QAA3B,CAApB;QACA,OAAOZ,KAAK,CAACc,GAAN,CAAUR,IAAI,IAAKA,IAAI,CAACC,EAAL,KAAYA,EAAZ,GAAiBD,IAAjB,GAAwBO,WAA3C,CAAP;MACD,CAHD,MAGO;QACL,MAAMA,WAAW,GAAG,EAAE,GAAGH,YAAL;UAAmBE,MAAM,EAAE;QAA3B,CAApB;QACA,OAAOZ,KAAK,CAACc,GAAN,CAAUR,IAAI,IAAKA,IAAI,CAACC,EAAL,KAAYA,EAAZ,GAAiBD,IAAjB,GAAwBO,WAA3C,CAAP;MACD;;IACH;MACE,OAAOb,KAAP;EAnBJ;AAqBD,CAtBD;;AAwBA,OAAO,MAAMe,WAAW,GAAG,MAAM;EAC/B,OAAO,MAAMC,QAAN,IAAkB;IACvB,MAAMC,KAAK,GAAG,MAAMnB,WAAW,CAACiB,WAAZ,EAApB;IACAC,QAAQ,CAAC;MACPd,IAAI,EAAE,WADC;MAEPC,IAAI,EAAEc;IAFC,CAAD,CAAR;EAID,CAND;AAOD,CARM;AAUP,OAAO,MAAMC,UAAU,GAAGZ,IAAI,IAAI;EAChC,OAAO,MAAMU,QAAN,IAAkB;IACvB,MAAMG,OAAO,GAAG,MAAMrB,WAAW,CAACoB,UAAZ,CAAuBZ,IAAvB,CAAtB;IACAU,QAAQ,CAAC;MACPd,IAAI,EAAE,aADC;MAEPC,IAAI,EAAEgB;IAFC,CAAD,CAAR;EAID,CAND;AAOD,CARM;AAUP,OAAO,MAAMC,UAAU,GAAGd,IAAI,IAAI;EAChC,OAAO,MAAMU,QAAN,IAAkB;IACvBA,QAAQ,CAAC;MACPd,IAAI,EAAE,aADC;MAEPC,IAAI,EAAEG,IAAI,CAACC;IAFJ,CAAD,CAAR;IAIA,MAAMT,WAAW,CAACuB,UAAZ,CAAuBf,IAAI,CAACC,EAA5B,CAAN;EACD,CAND;AAOD,CARM;AAUP,OAAO,MAAMe,UAAU,GAAGhB,IAAI,IAAI;EAChC,OAAO,MAAMU,QAAN,IAAkB;IACvB,MAAMlB,WAAW,CAACwB,UAAZ,CAAuBhB,IAAvB,CAAN;IACAE,OAAO,CAACC,GAAR,CAAY;MAAEI;IAAF,CAAZ;IACAG,QAAQ,CAAC;MACPd,IAAI,EAAE,aADC;MAEPC,IAAI,EAAEG;IAFC,CAAD,CAAR;EAID,CAPD;AAQD,CATM;AAWP,eAAeP,WAAf"},"metadata":{},"sourceType":"module"}